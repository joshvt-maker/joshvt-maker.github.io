import React, { useState, useCallback } from 'react';
import { ArrowUp, Award, MessageCircle, TrendingUp, User, Search, Plus, CheckCircle, Star, ThumbsUp } from 'lucide-react';

// Initial Data
const initialUsers = [
  {
    id: 1,
    name: "Sarah Chen",
    title: "SaaS Founder",
    credibilityScore: 847,
    badges: ["Top Contributor", "Fundraising Expert", "Verified Founder"],
    questionsAsked: 12,
    answersGiven: 87,
    upvotesReceived: 234,
    bio: "Built and scaled 2 SaaS companies. Passionate about helping first-time founders navigate fundraising."
  },
  {
    id: 2,
    name: "Marcus Thompson",
    title: "Serial Entrepreneur",
    credibilityScore: 765,
    badges: ["Marketing Guru", "Growth Hacker"],
    questionsAsked: 8,
    answersGiven: 56,
    upvotesReceived: 178,
    bio: "3x founder with successful exits. Love sharing marketing strategies that actually work."
  },
  {
    id: 3,
    name: "Alex Rivera",
    title: "Tech Startup Founder",
    credibilityScore: 692,
    badges: ["Product Expert", "Early Adopter"],
    questionsAsked: 15,
    answersGiven: 43,
    upvotesReceived: 145,
    bio: "Building in the AI space. Always happy to discuss product development and tech stacks."
  }
];

const initialQuestions = [
  {
    id: 1,
    userId: 3,
    category: "Fundraising",
    title: "What metrics should I focus on before approaching VCs?",
    content: "I'm preparing for my seed round and want to make sure I have all the right metrics in place. What are VCs actually looking at in 2025?",
    upvotes: 24,
    answerCount: 7,
    timestamp: "2 hours ago",
    answers: [
      {
        id: 1,
        userId: 1,
        content: "Focus on these key metrics: MRR growth rate (aim for 15%+ monthly), CAC payback period (under 12 months), net revenue retention (110%+), and burn multiple (under 1.5x). Also have your unit economics crystal clear - gross margin should be 70%+ for SaaS.",
        upvotes: 18,
        timestamp: "1 hour ago"
      },
      {
        id: 2,
        userId: 2,
        content: "Sarah's metrics are spot on. I'd add: make sure you can articulate your TAM/SAM/SOM clearly, show evidence of product-market fit through customer testimonials and retention data, and have a clear go-to-market strategy. VCs want to see you understand your path to scale.",
        upvotes: 12,
        timestamp: "45 minutes ago"
      }
    ]
  },
  {
    id: 2,
    userId: 2,
    category: "Marketing",
    title: "Best strategies for B2B customer acquisition on a tight budget?",
    content: "We're a bootstrapped B2B startup with limited marketing budget. What channels have you found most cost-effective for customer acquisition?",
    upvotes: 18,
    answerCount: 5,
    timestamp: "5 hours ago",
    answers: [
      {
        id: 3,
        userId: 1,
        content: "Content marketing and SEO are your best friends when bootstrapped. Create genuinely helpful content that solves your ICP's problems. Pair this with strategic LinkedIn outreach - not spammy sales messages, but actual value-add conversations. This combo got us our first 50 customers.",
        upvotes: 15,
        timestamp: "3 hours ago"
      }
    ]
  },
  {
    id: 3,
    userId: 1,
    category: "Product",
    title: "How do you balance feature requests vs. product vision?",
    content: "Getting lots of customer feature requests that would take us in different directions. How do you stay true to your vision while keeping customers happy?",
    upvotes: 31,
    answerCount: 9,
    timestamp: "1 day ago",
    answers: [
      {
        id: 4,
        userId: 3,
        content: "I use a framework: if 3+ customers from your ICP ask for the same thing within a month, it's probably worth considering. But always ask 'why' they want it - often the underlying need can be solved in a way that aligns with your vision. Don't build everything everyone asks for.",
        upvotes: 22,
        timestamp: "18 hours ago"
      },
      {
        id: 5,
        userId: 2,
        content: "Also remember: your most vocal customers aren't always representative of your broader market. Look at usage data, churn reasons, and talk to customers who left. That gives you a more complete picture of what to prioritize.",
        upvotes: 16,
        timestamp: "12 hours ago"
      }
    ]
  }
];

const CredibilityGauge = ({ score }) => {
  const percentage = Math.min((score / 1000) * 100, 100);
  let color = 'text-red-500';
  let label = 'Building';
  
  if (score >= 750) {
    color = 'text-emerald-500';
    label = 'Exceptional';
  } else if (score >= 600) {
    color = 'text-blue-500';
    label = 'Strong';
  } else if (score >= 400) {
    color = 'text-amber-500';
    label = 'Growing';
  }

  return (
    <div className="bg-gradient-to-br from-slate-800 to-slate-900 p-6 rounded-xl border border-slate-700">
      <div className="flex items-center justify-between mb-4">
        <h3 className="text-sm font-medium text-slate-400">Credibility Score</h3>
        <Award className={`w-5 h-5 ${color}`} />
      </div>
      <div className="text-4xl font-bold text-white mb-2">{score}</div>
      <div className="text-sm text-slate-400 mb-4">{label}</div>
      <div className="w-full bg-slate-700 rounded-full h-3 overflow-hidden">
        <div 
          className={`h-full bg-gradient-to-r ${
            score >= 750 ? 'from-emerald-500 to-emerald-400' :
            score >= 600 ? 'from-blue-500 to-blue-400' :
            score >= 400 ? 'from-amber-500 to-amber-400' :
            'from-red-500 to-red-400'
          } transition-all duration-500`}
          style={{ width: `${percentage}%` }}
        />
      </div>
      <div className="flex justify-between text-xs text-slate-500 mt-2">
        <span>0</span>
        <span>1000</span>
      </div>
    </div>
  );
};

export default function ElevarePlatform() {
  const [users, setUsers] = useState(initialUsers);
  const [questions, setQuestions] = useState(initialQuestions);
  const [currentView, setCurrentView] = useState('dashboard');
  const [selectedQuestion, setSelectedQuestion] = useState(null);
  const [currentUser, setCurrentUser] = useState(users[0]);
  const [searchTerm, setSearchTerm] = useState('');
  const [selectedCategory, setSelectedCategory] = useState('All');
  const [newQuestionTitle, setNewQuestionTitle] = useState('');
  const [newQuestionContent, setNewQuestionContent] = useState('');
  const [newQuestionCategory, setNewQuestionCategory] = useState('General');
  const [newAnswer, setNewAnswer] = useState('');
  const [editingProfile, setEditingProfile] = useState(false);
  const [profileForm, setProfileForm] = useState({});

  const categories = ['All', 'Fundraising', 'Marketing', 'Product', 'Operations', 'Legal', 'Team Building', 'General'];

  const upvoteQuestion = useCallback((questionId) => {
    setQuestions(prev => prev.map(q => 
      q.id === questionId ? { ...q, upvotes: q.upvotes + 1 } : q
    ));
    setUsers(prev => prev.map(u => {
      const question = questions.find(q => q.id === questionId);
      return u.id === question?.userId 
        ? { ...u, upvotesReceived: u.upvotesReceived + 1, credibilityScore: u.credibilityScore + 2 }
        : u;
    }));
  }, [questions]);

  const upvoteAnswer = useCallback((questionId, answerId) => {
    setQuestions(prev => prev.map(q => 
      q.id === questionId 
        ? {
            ...q,
            answers: q.answers.map(a => 
              a.id === answerId ? { ...a, upvotes: a.upvotes + 1 } : a
            )
          }
        : q
    ));
    setUsers(prev => prev.map(u => {
      const question = questions.find(q => q.id === questionId);
      const answer = question?.answers?.find(a => a.id === answerId);
      return u.id === answer?.userId 
        ? { ...u, upvotesReceived: u.upvotesReceived + 1, credibilityScore: u.credibilityScore + 5 }
        : u;
    }));
  }, [questions]);

  const submitQuestion = useCallback((e) => {
    e.preventDefault();
    if (!newQuestionTitle.trim() || !newQuestionContent.trim()) return;

    const newQ = {
      id: questions.length + 1,
      userId: currentUser.id,
      category: newQuestionCategory,
      title: newQuestionTitle,
      content: newQuestionContent,
      upvotes: 0,
      answerCount: 0,
      timestamp: 'Just now',
      answers: []
    };

    setQuestions(prev => [newQ, ...prev]);
    setUsers(prev => prev.map(u => 
      u.id === currentUser.id 
        ? { ...u, questionsAsked: u.questionsAsked + 1, credibilityScore: u.credibilityScore + 3 }
        : u
    ));
    setNewQuestionTitle('');
    setNewQuestionContent('');
    setNewQuestionCategory('General');
    setCurrentView('dashboard');
  }, [newQuestionTitle, newQuestionContent, newQuestionCategory, currentUser.id, questions.length]);

  const submitAnswer = useCallback((e) => {
    e.preventDefault();
    if (!newAnswer.trim() || !selectedQuestion) return;

    const newA = {
      id: Date.now(),
      userId: currentUser.id,
      content: newAnswer,
      upvotes: 0,
      timestamp: 'Just now'
    };

    setQuestions(prev => prev.map(q => 
      q.id === selectedQuestion.id 
        ? { 
            ...q, 
            answers: [...(q.answers || []), newA],
            answerCount: q.answerCount + 1
          }
        : q
    ));

    setUsers(prev => prev.map(u => 
      u.id === currentUser.id 
        ? { ...u, answersGiven: u.answersGiven + 1, credibilityScore: u.credibilityScore + 5 }
        : u
    ));

    setNewAnswer('');
    const updatedQuestion = questions.find(q => q.id === selectedQuestion.id);
    setSelectedQuestion({ 
      ...updatedQuestion, 
      answers: [...(updatedQuestion.answers || []), newA],
      answerCount: updatedQuestion.answerCount + 1
    });
  }, [newAnswer, selectedQuestion, currentUser.id, questions]);

  const filteredQuestions = questions.filter(q => {
    const matchesSearch = q.title.toLowerCase().includes(searchTerm.toLowerCase()) ||
                         q.content.toLowerCase().includes(searchTerm.toLowerCase());
    const matchesCategory = selectedCategory === 'All' || q.category === selectedCategory;
    return matchesSearch && matchesCategory;
  });

  const topContributors = [...users].sort((a, b) => b.credibilityScore - a.credibilityScore).slice(0, 3);

  // Dashboard View
  const DashboardView = () => (
    <div className="max-w-7xl mx-auto px-6 py-8">
      <div className="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8">
        <div className="lg:col-span-2">
          <div className="bg-gradient-to-r from-indigo-600 to-purple-600 rounded-2xl p-8 text-white mb-6">
            <h2 className="text-3xl font-bold mb-2">Welcome to Elevare</h2>
            <p className="text-indigo-100 text-lg">Where entrepreneurs build credibility and break through barriers together</p>
          </div>

          <div className="flex items-center gap-4 mb-6">
            <div className="relative flex-1">
              <Search className="absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400" />
              <input
                type="text"
                placeholder="Search questions..."
                value={searchTerm}
                onChange={(e) => setSearchTerm(e.target.value)}
                className="w-full bg-slate-800 border border-slate-700 rounded-lg pl-12 pr-4 py-3 text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-indigo-500"
              />
            </div>
            <button
              onClick={() => setCurrentView('ask')}
              className="bg-indigo-600 hover:bg-indigo-700 text-white px-6 py-3 rounded-lg font-medium flex items-center gap-2 transition-colors"
            >
              <Plus className="w-5 h-5" />
              Ask Question
            </button>
          </div>

          <div className="flex gap-2 mb-6 overflow-x-auto pb-2">
            {categories.map(cat => (
              <button
                key={cat}
                onClick={() => setSelectedCategory(cat)}
                className={`px-4 py-2 rounded-lg font-medium whitespace-nowrap transition-colors ${
                  selectedCategory === cat
                    ? 'bg-indigo-600 text-white'
                    : 'bg-slate-800 text-slate-300 hover:bg-slate-700'
                }`}
              >
                {cat}
              </button>
            ))}
          </div>

          <div className="space-y-4">
            {filteredQuestions.map(question => {
              const author = users.find(u => u.id === question.userId);
              return (
                <div
                  key={question.id}
                  onClick={() => {
                    setSelectedQuestion(question);
                    setCurrentView('question');
                  }}
                  className="bg-slate-800 border border-slate-700 rounded-xl p-6 hover:border-indigo-500 transition-colors cursor-pointer"
                >
                  <div className="flex items-start gap-4">
                    <button
                      onClick={(e) => {
                        e.stopPropagation();
                        upvoteQuestion(question.id);
                      }}
                      className="flex flex-col items-center gap-1 px-3 py-2 bg-slate-900 rounded-lg hover:bg-indigo-600 transition-colors"
                    >
                      <ArrowUp className="w-5 h-5 text-slate-300" />
                      <span className="text-sm font-bold text-white">{question.upvotes}</span>
                    </button>
                    <div className="flex-1">
                      <div className="flex items-center gap-2 mb-2">
                        <span className="px-3 py-1 bg-indigo-900 text-indigo-300 rounded-full text-xs font-medium">
                          {question.category}
                        </span>
                        <span className="text-slate-500 text-sm">{question.timestamp}</span>
                      </div>
                      <h3 className="text-xl font-semibold text-white mb-2 hover:text-indigo-400 transition-colors">
                        {question.title}
                      </h3>
                      <p className="text-slate-300 mb-4">{question.content}</p>
                      <div className="flex items-center justify-between">
                        <div className="flex items-center gap-4 text-sm text-slate-400">
                          <div className="flex items-center gap-2">
                            <User className="w-4 h-4" />
                            <span>{author?.name}</span>
                            <span className="text-amber-500">({author?.credibilityScore})</span>
                          </div>
                          <div className="flex items-center gap-2">
                            <MessageCircle className="w-4 h-4" />
                            <span>{question.answerCount} answers</span>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              );
            })}
          </div>
        </div>

        <div className="space-y-6">
          <div className="bg-slate-800 border border-slate-700 rounded-xl p-6">
            <h3 className="text-xl font-bold text-white mb-4 flex items-center gap-2">
              <TrendingUp className="w-5 h-5 text-indigo-400" />
              Top Contributors
            </h3>
            <div className="space-y-4">
              {topContributors.map((contributor, idx) => (
                <div key={contributor.id} className="flex items-center gap-3">
                  <div className="flex-shrink-0 w-10 h-10 bg-gradient-to-br from-indigo-600 to-purple-600 rounded-full flex items-center justify-center text-white font-bold">
                    {idx + 1}
                  </div>
                  <div className="flex-1">
                    <div className="flex items-center gap-2">
                      <div className="font-medium text-white">{contributor.name}</div>
                      <CheckCircle className="w-4 h-4 text-indigo-400" />
                    </div>
                    <div className="text-sm text-slate-400">{contributor.title}</div>
                    <div className="flex items-center gap-2 mt-1">
                      <Star className="w-4 h-4 text-amber-500" />
                      <span className="text-sm font-bold text-amber-500">{contributor.credibilityScore}</span>
                      <span className="text-xs text-slate-500">
                        {contributor.answersGiven} answers
                      </span>
                    </div>
                  </div>
                </div>
              ))}
            </div>
          </div>

          <div className="bg-slate-800 border border-slate-700 rounded-xl p-6">
            <h3 className="text-xl font-bold text-white mb-4">How Credibility Works</h3>
            <div className="space-y-3 text-sm text-slate-300">
              <div className="flex items-start gap-2">
                <CheckCircle className="w-5 h-5 text-emerald-500 flex-shrink-0 mt-0.5" />
                <div>
                  <div className="font-medium text-white">Ask Questions: +3 points</div>
                  <div className="text-slate-400">Share your challenges</div>
                </div>
              </div>
              <div className="flex items-start gap-2">
                <CheckCircle className="w-5 h-5 text-emerald-500 flex-shrink-0 mt-0.5" />
                <div>
                  <div className="font-medium text-white">Give Answers: +5 points</div>
                  <div className="text-slate-400">Help fellow entrepreneurs</div>
                </div>
              </div>
              <div className="flex items-start gap-2">
                <CheckCircle className="w-5 h-5 text-emerald-500 flex-shrink-0 mt-0.5" />
                <div>
                  <div className="font-medium text-white">Receive Upvotes: +2-5 points</div>
                  <div className="text-slate-400">Quality content gets rewarded</div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  );

  // Ask Question View
  const AskQuestionView = () => (
    <div className="max-w-3xl mx-auto px-6 py-8">
      <button
        onClick={() => setCurrentView('dashboard')}
        className="text-indigo-400 hover:text-indigo-300 mb-6 flex items-center gap-2"
      >
        ← Back to Dashboard
      </button>
      <div className="bg-slate-800 border border-slate-700 rounded-xl p-8">
        <h2 className="text-2xl font-bold text-white mb-6">Ask Your Question</h2>
        <form onSubmit={submitQuestion} className="space-y-6">
          <div>
            <label className="block text-sm font-medium text-slate-300 mb-2">Category</label>
            <select
              value={newQuestionCategory}
              onChange={(e) => setNewQuestionCategory(e.target.value)}
              className="w-full bg-slate-900 border border-slate-700 rounded-lg px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-indigo-500"
            >
              {categories.filter(c => c !== 'All').map(cat => (
                <option key={cat} value={cat}>{cat}</option>
              ))}
            </select>
          </div>
          <div>
            <label className="block text-sm font-medium text-slate-300 mb-2">Question Title</label>
            <input
              type="text"
              value={newQuestionTitle}
              onChange={(e) => setNewQuestionTitle(e.target.value)}
              placeholder="What would you like to know?"
              className="w-full bg-slate-900 border border-slate-700 rounded-lg px-4 py-3 text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-indigo-500"
              required
            />
          </div>
          <div>
            <label className="block text-sm font-medium text-slate-300 mb-2">Details</label>
            <textarea
              value={newQuestionContent}
              onChange={(e) => setNewQuestionContent(e.target.value)}
              placeholder="Provide more context about your question..."
              rows={6}
              className="w-full bg-slate-900 border border-slate-700 rounded-lg px-4 py-3 text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-indigo-500"
              required
            />
          </div>
          <button
            type="submit"
            className="w-full bg-indigo-600 hover:bg-indigo-700 text-white py-3 rounded-lg font-medium transition-colors"
          >
            Post Question
          </button>
        </form>
      </div>
    </div>
  );

  // Question Detail View
  const QuestionDetailView = () => {
    if (!selectedQuestion) return null;
    const author = users.find(u => u.id === selectedQuestion.userId);
    
    return (
      <div className="max-w-4xl mx-auto px-6 py-8">
        <button
          onClick={() => setCurrentView('dashboard')}
          className="text-indigo-400 hover:text-indigo-300 mb-6 flex items-center gap-2"
        >
          ← Back to Questions
        </button>
        
        <div className="bg-slate-800 border border-slate-700 rounded-xl p-8 mb-6">
          <div className="flex items-start gap-4 mb-6">
            <button
              onClick={() => upvoteQuestion(selectedQuestion.id)}
              className="flex flex-col items-center gap-1 px-4 py-3 bg-slate-900 rounded-lg hover:bg-indigo-600 transition-colors"
            >
              <ArrowUp className="w-6 h-6 text-slate-300" />
              <span className="text-lg font-bold text-white">{selectedQuestion.upvotes}</span>
            </button>
            <div className="flex-1">
              <div className="flex items-center gap-2 mb-3">
                <span className="px-3 py-1 bg-indigo-900 text-indigo-300 rounded-full text-sm font-medium">
                  {selectedQuestion.category}
                </span>
                <span className="text-slate-500 text-sm">{selectedQuestion.timestamp}</span>
              </div>
              <h1 className="text-3xl font-bold text-white mb-4">{selectedQuestion.title}</h1>
              <p className="text-slate-300 text-lg mb-4">{selectedQuestion.content}</p>
              <div className="flex items-center gap-2 text-slate-400">
                <User className="w-5 h-5" />
                <span className="font-medium">{author?.name}</span>
                <span className="text-amber-500">({author?.credibilityScore})</span>
                <span className="mx-2">•</span>
                <span>{author?.title}</span>
              </div>
            </div>
          </div>
        </div>

        <div className="bg-slate-800 border border-slate-700 rounded-xl p-8 mb-6">
          <h2 className="text-xl font-bold text-white mb-4">
            {selectedQuestion.answerCount} {selectedQuestion.answerCount === 1 ? 'Answer' : 'Answers'}
          </h2>
          <div className="space-y-6">
            {(selectedQuestion.answers || []).map(answer => {
              const answerAuthor = users.find(u => u.id === answer.userId);
              return (
                <div key={answer.id} className="flex items-start gap-4 pb-6 border-b border-slate-700 last:border-0 last:pb-0">
                  <button
                    onClick={() => upvoteAnswer(selectedQuestion.id, answer.id)}
                    className="flex flex-col items-center gap-1 px-3 py-2 bg-slate-900 rounded-lg hover:bg-indigo-600 transition-colors"
                  >
                    <ThumbsUp className="w-5 h-5 text-slate-300" />
                    <span className="text-sm font-bold text-white">{answer.upvotes}</span>
                  </button>
                  <div className="flex-1">
                    <p className="text-slate-300 mb-3 text-lg">{answer.content}</p>
                    <div className="flex items-center gap-2 text-sm text-slate-400">
                      <User className="w-4 h-4" />
                      <span className="font-medium">{answerAuthor?.name}</span>
                      <span className="text-amber-500">({answerAuthor?.credibilityScore})</span>
                      <span className="mx-2">•</span>
                      <span>{answer.timestamp}</span>
                      {answerAuthor?.badges && answerAuthor.badges[0] && (
                        <>
                          <span className="mx-2">•</span>
                          <Award className="w-4 h-4 text-indigo-400" />
                          <span className="text-indigo-400">{answerAuthor.badges[0]}</span>
                        </>
                      )}
                    </div>
                  </div>
                </div>
              );
            })}
          </div>
        </div>

        <div className="bg-slate-800 border border-slate-700 rounded-xl p-8">
          <h3 className="text-xl font-bold text-white mb-4">Your Answer</h3>
          <form onSubmit={submitAnswer}>
            <textarea
              value={newAnswer}
              onChange={(e) => setNewAnswer(e.target.value)}
              placeholder="Share your experience and insights..."
              rows={6}
              className="w-full bg-slate-900 border border-slate-700 rounded-lg px-4 py-3 text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-indigo-500 mb-4"
              required
            />
            <button
              type="submit"
              className="bg-indigo-600 hover:bg-indigo-700 text-white px-6 py-3 rounded-lg font-medium transition-colors"
            >
              Post Answer
            </button>
          </form>
        </div>
      </div>
    );
  };

  // Profile View
  const ProfileView = () => {
    const userQuestions = questions.filter(q => q.userId === currentUser.id);
    const userAnswers = questions.flatMap(q => 
      (q.answers || []).filter(a => a.userId === currentUser.id).map(a => ({ ...a, questionTitle: q.title }))
    );

    return (
      <div className="max-w-4xl mx-auto px-6 py-8">
        <div className="bg-gradient-to-br from-slate-800 to-slate-900 border border-slate-700 rounded-xl p-8 mb-6">
          <div className="flex items-start justify-between mb-6">
            <div>
              <h1 className="text-3xl font-bold text-white mb-2">{currentUser.name}</h1>
              <p className="text-xl text-slate-300 mb-4">{currentUser.title}</p>
              <p className="text-slate-400">{currentUser.bio}</p>
            </div>
            <button
              onClick={() => {
                setProfileForm(currentUser);
                setEditingProfile(true);
              }}
              className="bg-slate-700 hover:bg-slate-600 text-white px-4 py-2 rounded-lg transition-colors"
            >
              Edit Profile
            </button>
          </div>

          <div className="flex flex-wrap gap-2 mb-6">
            {currentUser.badges.map(badge => (
              <span key={badge} className="px-3 py-1 bg-indigo-900 text-indigo-300 rounded-full text-sm font-medium flex items-center gap-2">
                <Award className="w-4 h-4" />
                {badge}
              </span>
            ))}
          </div>

          <div className="grid grid-cols-3 gap-4 mb-6">
            <div className="bg-slate-800 rounded-lg p-4">
              <div className="text-2xl font-bold text-white mb-1">{currentUser.questionsAsked}</div>
              <div className="text-sm text-slate-400">Questions Asked</div>
            </div>
            <div className="bg-slate-800 rounded-lg p-4">
              <div className="text-2xl font-bold text-white mb-1">{currentUser.answersGiven}</div>
              <div className="text-sm text-slate-400">Answers Given</div>
            </div>
            <div className="bg-slate-800 rounded-lg p-4">
              <div className="text-2xl font-bold text-white mb-1">{currentUser.upvotesReceived}</div>
              <div className="text-sm text-slate-400">Upvotes Received</div>
            </div>
          </div>

          <CredibilityGauge score={currentUser.credibilityScore} />
        </div>

        <div className="grid grid-cols-1 lg:grid-cols-2 gap-6">
          <div className="bg-slate-800 border border-slate-700 rounded-xl p-6">
            <h3 className="text-xl font-bold text-white mb-4 flex items-center gap-2">
              <MessageCircle className="w-5 h-5 text-indigo-400" />
              Recent Questions
            </h3>
            <div className="space-y-3">
              {userQuestions.slice(0, 5).map(q => (
                <div 
                  key={q.id}
                  onClick={() => {
                    setSelectedQuestion(q);
                    setCurrentView('question');
                  }}
                  className="p-3 bg-slate-900 rounded-lg hover:bg-slate-700 transition-colors cursor-pointer"
                >
                  <div className="font-medium text-white mb-1">{q.title}</div>
                  <div className="flex items-center gap-3 text-sm text-slate-400">
                    <span className="flex items-center gap-1">
                      <ArrowUp className="w-3 h-3" />
                      {q.upvotes}
                    </span>
                    <span className="flex items-center gap-1">
                      <MessageCircle className="w-3 h-3" />
                      {q.answerCount}
                    </span>
                    <span>{q.timestamp}</span>
                  </div>
                </div>
              ))}
              {userQuestions.length === 0 && (
                <p className="text-slate-400 text-sm">No questions yet</p>
              )}
            </div>
          </div>

          <div className="bg-slate-800 border border-slate-700 rounded-xl p-6">
            <h3 className="text-xl font-bold text-white mb-4 flex items-center gap-2">
              <ThumbsUp className="w-5 h-5 text-emerald-400" />
              Recent Answers
            </h3>
            <div className="space-y-3">
              {userAnswers.slice(0, 5).map(a => (
                <div key={a.id} className="p-3 bg-slate-900 rounded-lg">
                  <div className="text-sm text-slate-400 mb-1">On: {a.questionTitle}</div>
                  <div className="text-white mb-2 line-clamp-2">{a.content}</div>
                  <div className="flex items-center gap-3 text-sm text-slate-400">
                    <span className="flex items-center gap-1">
                      <ThumbsUp className="w-3 h-3" />
                      {a.upvotes}
                    </span>
                    <span>{a.timestamp}</span>
                  </div>
                </div>
              ))}
              {userAnswers.length === 0 && (
                <p className="text-slate-400 text-sm">No answers yet</p>
              )}
            </div>
          </div>
        </div>
      </div>
    );
  };

  // Edit Profile Modal
  const EditProfileModal = () => {
    if (!editingProfile) return null;

    return (
      <div className="fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center p-4 z-50">
        <div className="bg-slate-800 border border-slate-700 rounded-xl p-8 max-w-md w-full">
          <h2 className="text-2xl font-bold text-white mb-6">Edit Profile</h2>
          <form onSubmit={(e) => {
            e.preventDefault();
            setCurrentUser(profileForm);
            setUsers(prev => prev.map(u => u.id === profileForm.id ? profileForm : u));
            setEditingProfile(false);
          }} className="space-y-4">
            <div>
              <label className="block text-sm font-medium text-slate-300 mb-2">Name</label>
              <input
                type="text"
                value={profileForm.name}
                onChange={(e) => setProfileForm({...profileForm, name: e.target.value})}
                className="w-full bg-slate-900 border border-slate-700 rounded-lg px-4 py-2 text-white focus:outline-none focus:ring-2 focus:ring-indigo-500"
              />
            </div>
            <div>
              <label className="block text-sm font-medium text-slate-300 mb-2">Title</label>
              <input
                type="text"
                value={profileForm.title}
                onChange={(e) => setProfileForm({...profileForm, title: e.target.value})}
                className="w-full bg-slate-900 border border-slate-700 rounded-lg px-4 py-2 text-white focus:outline-none focus:ring-2 focus:ring-indigo-500"
              />
            </div>
            <div>
              <label className="block text-sm font-medium text-slate-300 mb-2">Bio</label>
              <textarea
                value={profileForm.bio}
                onChange={(e) => setProfileForm({...profileForm, bio: e.target.value})}
                rows={4}
                className="w-full bg-slate-900 border border-slate-700 rounded-lg px-4 py-2 text-white focus:outline-none focus:ring-2 focus:ring-indigo-500"
              />
            </div>
            <div className="flex gap-3">
              <button
                type="submit"
                className="flex-1 bg-indigo-600 hover:bg-indigo-700 text-white py-2 rounded-lg font-medium transition-colors"
              >
                Save Changes
              </button>
              <button
                type="button"
                onClick={() => setEditingProfile(false)}
                className="flex-1 bg-slate-700 hover:bg-slate-600 text-white py-2 rounded-lg font-medium transition-colors"
              >
                Cancel
              </button>
            </div>
          </form>
        </div>
      </div>
    );
  };

  return (
    <div className="min-h-screen bg-gradient-to-br from-slate-950 via-slate-900 to-slate-950">
      {/* Header */}
      <header className="border-b border-slate-800 bg-slate-900/50 backdrop-blur-sm sticky top-0 z-40">
        <div className="max-w-7xl mx-auto px-6 py-4">
          <div className="flex items-center justify-between">
            <div 
              onClick={() => setCurrentView('dashboard')}
              className="flex items-center gap-3 cursor-pointer"
            >
              <div className="w-10 h-10 bg-gradient-to-br from-indigo-600 to-purple-600 rounded-lg flex items-center justify-center">
                <TrendingUp className="w-6 h-6 text-white" />
              </div>
              <span className="text-2xl font-bold text-white">Elevare</span>
            </div>
            
            <nav className="flex items-center gap-6">
              <button
                onClick={() => setCurrentView('dashboard')}
                className={`font-medium transition-colors ${
                  currentView === 'dashboard' 
                    ? 'text-indigo-400' 
                    : 'text-slate-300 hover:text-white'
                }`}
              >
                Dashboard
              </button>
              <button
                onClick={() => setCurrentView('profile')}
                className={`font-medium transition-colors ${
                  currentView === 'profile' 
                    ? 'text-indigo-400' 
                    : 'text-slate-300 hover:text-white'
                }`}
              >
                Profile
              </button>
              <div className="flex items-center gap-2 pl-4 border-l border-slate-700">
                <div className="w-8 h-8 bg-gradient-to-br from-indigo-600 to-purple-600 rounded-full flex items-center justify-center text-white text-sm font-bold">
                  {currentUser.name.split(' ').map(n => n[0]).join('')}
                </div>
                <div className="flex items-center gap-2">
                  <Star className="w-4 h-4 text-amber-500" />
                  <span className="font-bold text-amber-500">{currentUser.credibilityScore}</span>
                </div>
              </div>
            </nav>
          </div>
        </div>
      </header>

      {/* Main Content */}
      <main>
        {currentView === 'dashboard' && <DashboardView />}
        {currentView === 'ask' && <AskQuestionView />}
        {currentView === 'question' && <QuestionDetailView />}
        {currentView === 'profile' && <ProfileView />}
      </main>

      {/* Edit Profile Modal */}
      <EditProfileModal />

      {/* Footer */}
      <footer className="border-t border-slate-800 bg-slate-900/50 mt-16">
        <div className="max-w-7xl mx-auto px-6 py-8">
          <div className="text-center text-slate-400">
            <p className="mb-2">Built with ❤️ for entrepreneurs breaking barriers</p>
            <p className="text-sm">Elevare - Where credibility matters, not demographics</p>
          </div>
        </div>
      </footer>
    </div>
  );
}
